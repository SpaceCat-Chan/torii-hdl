<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>CSRs &mdash; Torii-HDL 0.4.dev212 documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/styles.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/platformpicker.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/styles.css" type="text/css" />
    <link rel="canonical" href="https://shrine-maiden-heavy-industries.github.io/torii-hdl/library/soc/csr/index.html" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/sphinx_highlight.js"></script>
        <script src="../../../_static/platformpicker.js"></script>
        <script src="../../../_static/wavedrom.skin.js"></script>
        <script src="../../../_static/wavedrom.min.js"></script>
        <script src="../../../_static/js/wavedrom.min.js"></script>
        <script src="../../../_static/js/wavedrom.skin.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="Wishbone Bus" href="../wishbone/index.html" />
    <link rel="prev" title="Peripherals" href="../periph.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> Torii-HDL
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../intro.html#the-torii-language">The Torii language</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../intro.html#the-torii-standard-library">The Torii standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../intro.html#the-torii-simulator">The Torii simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../intro.html#the-torii-build-system">The Torii build system</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../intro.html#fpga-toolchain-integration">FPGA toolchain integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../intro.html#development-board-definitions">Development board definitions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#system-requirements">System requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#installing-prerequisites">Installing Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#installing-python">Installing Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#installing-yosys-and-gtkwave">Installing Yosys and GTKWave</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#installing-torii">Installing Torii</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#latest-release">Latest release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#development-snapshot">Development snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#editable-development-snapshot">Editable development snapshot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../install.html#installing-board-definitions">Installing board definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#id1">Latest release</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#id2">Development snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../install.html#id3">Editable development snapshot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../getting_started.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started.html#a-counter">A counter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../getting_started.html#implementing-a-counter">Implementing a counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting_started.html#testing-a-counter">Testing a counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../getting_started.html#converting-a-counter">Converting a counter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../getting_started.html#a-blinking-led">A blinking LED</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../language/index.html">Language Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../language/index.html#the-prelude">The prelude</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../language/index.html#values">Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../language/index.html#constants">Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../../language/index.html#shapes">Shapes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#shapes-of-values">Shapes of values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../language/index.html#shape-casting">Shape casting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#shapes-from-integers">Shapes from integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#shapes-from-ranges">Shapes from ranges</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#shapes-from-enumerations">Shapes from enumerations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../language/index.html#value-casting">Value casting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#values-from-integers">Values from integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#values-from-enumeration-members">Values from enumeration members</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../language/index.html#signals">Signals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#signal-shapes">Signal shapes</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#signal-names">Signal names</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#initial-signal-values">Initial signal values</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#reset-less-signals">Reset-less signals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../language/index.html#operators">Operators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#performing-or-describing-computations">Performing or describing computations?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#width-extension">Width extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#arithmetic-operators">Arithmetic operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#comparison-operators">Comparison operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#bitwise-shift-and-rotate-operators">Bitwise, shift, and rotate operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#reduction-operators">Reduction operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#logical-operators">Logical operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#bit-sequence-operators">Bit sequence operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#conversion-operators">Conversion operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#choice-operator">Choice operator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../language/index.html#modules">Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#control-domains">Control domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#assigning-to-signals">Assigning to signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#assignment-targets">Assignment targets</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#assignment-domains">Assignment domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#assignment-order">Assignment order</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#control-structures">Control structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#active-and-inactive-assignments">Active and inactive assignments</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#combinatorial-evaluation">Combinatorial evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../language/index.html#synchronous-evaluation">Synchronous evaluation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../api/backend/index.html">Torii Backends</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/backend/cxxrtl.html">CXXRTL Backend</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/backend/cxxrtl.html#torii.back.cxxrtl.YosysError"><code class="docutils literal notranslate"><span class="pre">YosysError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/backend/rtlil.html">RTLIL Backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/backend/verilog.html">Verilog Backend</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/backend/verilog.html#torii.back.verilog.YosysError"><code class="docutils literal notranslate"><span class="pre">YosysError</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../api/hdl/index.html">Torii HDL Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../api/hdl/ast.html">Abstract Syntax Tree</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.Shape"><code class="docutils literal notranslate"><span class="pre">Shape</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.signed"><code class="docutils literal notranslate"><span class="pre">signed()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.unsigned"><code class="docutils literal notranslate"><span class="pre">unsigned()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.ShapeCastable"><code class="docutils literal notranslate"><span class="pre">ShapeCastable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.Const"><code class="docutils literal notranslate"><span class="pre">Const</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.AnyConst"><code class="docutils literal notranslate"><span class="pre">AnyConst</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.AnySeq"><code class="docutils literal notranslate"><span class="pre">AnySeq</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.Mux"><code class="docutils literal notranslate"><span class="pre">Mux()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.Cat"><code class="docutils literal notranslate"><span class="pre">Cat</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.Repl"><code class="docutils literal notranslate"><span class="pre">Repl</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.Array"><code class="docutils literal notranslate"><span class="pre">Array</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.Signal"><code class="docutils literal notranslate"><span class="pre">Signal</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.ClockSignal"><code class="docutils literal notranslate"><span class="pre">ClockSignal</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.ResetSignal"><code class="docutils literal notranslate"><span class="pre">ResetSignal</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.UserValue"><code class="docutils literal notranslate"><span class="pre">UserValue</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.ValueCastable"><code class="docutils literal notranslate"><span class="pre">ValueCastable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.Sample"><code class="docutils literal notranslate"><span class="pre">Sample</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.Initial"><code class="docutils literal notranslate"><span class="pre">Initial</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.ValueSet"><code class="docutils literal notranslate"><span class="pre">ValueSet</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ast.html#torii.hdl.ast.SignalSet"><code class="docutils literal notranslate"><span class="pre">SignalSet</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/hdl/cd.html">Clock Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/cd.html#torii.hdl.cd.ClockDomain"><code class="docutils literal notranslate"><span class="pre">ClockDomain</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/cd.html#torii.hdl.cd.DomainError"><code class="docutils literal notranslate"><span class="pre">DomainError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/hdl/dsl.html">DSL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/dsl.html#torii.hdl.dsl.SyntaxError"><code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/dsl.html#torii.hdl.dsl.SyntaxWarning"><code class="docutils literal notranslate"><span class="pre">SyntaxWarning</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/hdl/ir.html">IR</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ir.html#torii.hdl.ir.UnusedElaboratable"><code class="docutils literal notranslate"><span class="pre">UnusedElaboratable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/ir.html#torii.hdl.ir.DriverConflict"><code class="docutils literal notranslate"><span class="pre">DriverConflict</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/hdl/mem.html">Memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/mem.html#torii.hdl.mem.Memory"><code class="docutils literal notranslate"><span class="pre">Memory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/mem.html#torii.hdl.mem.ReadPort"><code class="docutils literal notranslate"><span class="pre">ReadPort</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/mem.html#torii.hdl.mem.WritePort"><code class="docutils literal notranslate"><span class="pre">WritePort</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/mem.html#torii.hdl.mem.DummyPort"><code class="docutils literal notranslate"><span class="pre">DummyPort</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/hdl/rec.html">Records</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/rec.html#torii.hdl.rec.Direction"><code class="docutils literal notranslate"><span class="pre">Direction</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../api/hdl/rec.html#torii.hdl.rec.Record"><code class="docutils literal notranslate"><span class="pre">Record</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../api/hdl/xfrm.html">XFRM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../../index.html">Standard Library</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../coding.html">Code Conversion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../coding.html#one-hot-coding">One-hot coding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../coding.html#torii.lib.coding.Encoder"><code class="docutils literal notranslate"><span class="pre">Encoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../coding.html#torii.lib.coding.Decoder"><code class="docutils literal notranslate"><span class="pre">Decoder</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../coding.html#priority-coding">Priority coding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../coding.html#torii.lib.coding.PriorityEncoder"><code class="docutils literal notranslate"><span class="pre">PriorityEncoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../coding.html#torii.lib.coding.PriorityDecoder"><code class="docutils literal notranslate"><span class="pre">PriorityDecoder</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../coding.html#gray-coding">Gray coding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../coding.html#torii.lib.coding.GrayEncoder"><code class="docutils literal notranslate"><span class="pre">GrayEncoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../coding.html#torii.lib.coding.GrayDecoder"><code class="docutils literal notranslate"><span class="pre">GrayDecoder</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../cdc.html">Clock Domain Crossing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../cdc.html#torii.lib.cdc.FFSynchronizer"><code class="docutils literal notranslate"><span class="pre">FFSynchronizer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cdc.html#torii.lib.cdc.AsyncFFSynchronizer"><code class="docutils literal notranslate"><span class="pre">AsyncFFSynchronizer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cdc.html#torii.lib.cdc.ResetSynchronizer"><code class="docutils literal notranslate"><span class="pre">ResetSynchronizer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../cdc.html#torii.lib.cdc.PulseSynchronizer"><code class="docutils literal notranslate"><span class="pre">PulseSynchronizer</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../fifo.html">First-in First-out Queues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../fifo.html#torii.lib.fifo.FIFOInterface"><code class="docutils literal notranslate"><span class="pre">FIFOInterface</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../fifo.html#torii.lib.fifo.SyncFIFO"><code class="docutils literal notranslate"><span class="pre">SyncFIFO</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../fifo.html#torii.lib.fifo.SyncFIFOBuffered"><code class="docutils literal notranslate"><span class="pre">SyncFIFOBuffered</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../fifo.html#torii.lib.fifo.AsyncFIFO"><code class="docutils literal notranslate"><span class="pre">AsyncFIFO</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="../../fifo.html#torii.lib.fifo.AsyncFIFOBuffered"><code class="docutils literal notranslate"><span class="pre">AsyncFIFOBuffered</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">System on Chip</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../event.html">Events</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../event.html#torii.lib.soc.event.Source"><code class="docutils literal notranslate"><span class="pre">Source</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../event.html#torii.lib.soc.event.EventMap"><code class="docutils literal notranslate"><span class="pre">EventMap</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../event.html#torii.lib.soc.event.Monitor"><code class="docutils literal notranslate"><span class="pre">Monitor</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../memory.html">Memory Map</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../memory.html#torii.lib.soc.memory.ResourceInfo"><code class="docutils literal notranslate"><span class="pre">ResourceInfo</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../memory.html#torii.lib.soc.memory.MemoryMap"><code class="docutils literal notranslate"><span class="pre">MemoryMap</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../periph.html">Peripherals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../periph.html#torii.lib.soc.periph.ConstantValue"><code class="docutils literal notranslate"><span class="pre">ConstantValue</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../periph.html#torii.lib.soc.periph.ConstantBool"><code class="docutils literal notranslate"><span class="pre">ConstantBool</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../periph.html#torii.lib.soc.periph.ConstantInt"><code class="docutils literal notranslate"><span class="pre">ConstantInt</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../periph.html#torii.lib.soc.periph.ConstantMap"><code class="docutils literal notranslate"><span class="pre">ConstantMap</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../periph.html#torii.lib.soc.periph.PeripheralInfo"><code class="docutils literal notranslate"><span class="pre">PeripheralInfo</span></code></a></li>
</ul>
</li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">CSRs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#bus">Bus</a></li>
<li class="toctree-l4"><a class="reference internal" href="#events">Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="#wishbone">Wishbone</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../wishbone/index.html">Wishbone Bus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../wishbone/index.html#torii.lib.soc.wishbone.bus.CycleType"><code class="docutils literal notranslate"><span class="pre">CycleType</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../wishbone/index.html#torii.lib.soc.wishbone.bus.BurstTypeExt"><code class="docutils literal notranslate"><span class="pre">BurstTypeExt</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../wishbone/index.html#torii.lib.soc.wishbone.bus.Interface"><code class="docutils literal notranslate"><span class="pre">Interface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../wishbone/index.html#torii.lib.soc.wishbone.bus.Decoder"><code class="docutils literal notranslate"><span class="pre">Decoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../wishbone/index.html#torii.lib.soc.wishbone.bus.Arbiter"><code class="docutils literal notranslate"><span class="pre">Arbiter</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../stdio/index.html">Industry Standard I/O</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../stdio/index.html#serial-i-o">Serial I/O</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../stdio/index.html#torii.lib.stdio.serial.AsyncSerialRX"><code class="docutils literal notranslate"><span class="pre">AsyncSerialRX</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../stdio/index.html#torii.lib.stdio.serial.AsyncSerialTX"><code class="docutils literal notranslate"><span class="pre">AsyncSerialTX</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../stdio/index.html#torii.lib.stdio.serial.AsyncSerial"><code class="docutils literal notranslate"><span class="pre">AsyncSerial</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../vendor/index.html">FPGA Vendor Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../vendor/lattice/index.html">Lattice FPGA Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../vendor/lattice/index.html#ice40-blocks">iCE40 Blocks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../vendor/xilinx/index.html">Xilinx FPGA Modules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../platforms/index.html">Platform Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../platforms/fpga/index.html">Torii FPGA Platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/fpga/intel.html">Intel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/fpga/intel.html#torii.platform.vendor.intel.IntelPlatform"><code class="docutils literal notranslate"><span class="pre">IntelPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/fpga/lattice-ecp5.html">Lattice ECP5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/fpga/lattice-ecp5.html#torii.platform.vendor.lattice_ecp5.LatticeECP5Platform"><code class="docutils literal notranslate"><span class="pre">LatticeECP5Platform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/fpga/lattice-ice40.html">Lattice iCE40</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/fpga/lattice-ice40.html#torii.platform.vendor.lattice_ice40.LatticeICE40Platform"><code class="docutils literal notranslate"><span class="pre">LatticeICE40Platform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/fpga/lattice-machxo-2-3l.html">Lattice MachXO2 and MachXO3L</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/fpga/lattice-machxo-2-3l.html#torii.platform.vendor.lattice_machxo_2_3l.LatticeMachXO2Platform"><code class="docutils literal notranslate"><span class="pre">LatticeMachXO2Platform</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/fpga/lattice-machxo-2-3l.html#torii.platform.vendor.lattice_machxo_2_3l.LatticeMachXO3LPlatform"><code class="docutils literal notranslate"><span class="pre">LatticeMachXO3LPlatform</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/fpga/lattice-machxo-2-3l.html#torii.platform.vendor.lattice_machxo_2_3l.LatticeMachXO2Or3LPlatform"><code class="docutils literal notranslate"><span class="pre">LatticeMachXO2Or3LPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/fpga/quicklogic.html">Quicklogic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/fpga/quicklogic.html#torii.platform.vendor.quicklogic.QuicklogicPlatform"><code class="docutils literal notranslate"><span class="pre">QuicklogicPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../../platforms/fpga/xilinx.html">Xilinx</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../../../platforms/fpga/xilinx.html#torii.platform.vendor.xilinx.XilinxPlatform"><code class="docutils literal notranslate"><span class="pre">XilinxPlatform</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../sim/index.html">Simulation Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#unreleased">Unreleased</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#added">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#changed">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#removed">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../../changelog.html#fixed">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../changelog.html#id1">0.1.0 - 0.3.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference external" href="https://shrine-maiden-heavy-industries.github.io/torii-boards/">Torii Boards</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">Torii-HDL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="../../index.html">Standard Library</a></li>
          <li class="breadcrumb-item"><a href="../index.html">System on Chip</a></li>
      <li class="breadcrumb-item active">CSRs</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/shrine-maiden-heavy-industries/torii-hdl/blob/main/docs/library/soc/csr/index.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="csrs">
<h1>CSRs<a class="headerlink" href="#csrs" title="Permalink to this heading"></a></h1>
<section id="bus">
<h2>Bus<a class="headerlink" href="#bus" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="torii.lib.soc.csr.bus.Element">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torii.lib.soc.csr.bus.</span></span><span class="sig-name descname"><span class="pre">Element</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#torii.lib.soc.csr.bus.Element" title="Permalink to this definition"></a></dt>
<dd></dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="torii.lib.soc.csr.bus.Interface">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torii.lib.soc.csr.bus.</span></span><span class="sig-name descname"><span class="pre">Interface</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#torii.lib.soc.csr.bus.Interface" title="Permalink to this definition"></a></dt>
<dd><p>CPU-side CSR interface.</p>
<p>A low-level interface to a set of atomically readable and writable peripheral CSR registers.</p>
<section id="operation">
<h3>Operation<a class="headerlink" href="#operation" title="Permalink to this heading"></a></h3>
<p>CSR registers mapped to the CSR bus are split into chunks according to the bus data width.
Each chunk is assigned a consecutive address on the bus. This allows accessing CSRs of any
size using any datapath width.</p>
<p>When the first chunk of a register is read, the value of a register is captured, and reads
from subsequent chunks of the same register return the captured values. When any chunk except
the last chunk of a register is written, the written value is captured; a write to the last
chunk writes the captured value to the register. This allows atomically accessing CSRs larger
than datapath width.</p>
<dl class="field-list simple">
<dt class="field-odd">param addr_width</dt>
<dd class="field-odd"><p>Address width. At most <code class="docutils literal notranslate"><span class="pre">(2</span> <span class="pre">**</span> <span class="pre">addr_width)</span> <span class="pre">*</span> <span class="pre">data_width</span></code> register bits will be available.</p>
</dd>
<dt class="field-even">type addr_width</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">param data_width</dt>
<dd class="field-odd"><p>Data width. Registers are accessed in <code class="docutils literal notranslate"><span class="pre">data_width</span></code> sized chunks.</p>
</dd>
<dt class="field-even">type data_width</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">param name</dt>
<dd class="field-odd"><p>Name of the underlying record.</p>
</dd>
<dt class="field-even">type name</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">ivar memory_map</dt>
<dd class="field-odd"><p>Map of the bus.</p>
</dd>
<dt class="field-even">vartype memory_map</dt>
<dd class="field-even"><p>MemoryMap</p>
</dd>
<dt class="field-odd">ivar addr</dt>
<dd class="field-odd"><p>Address for reads and writes.</p>
</dd>
<dt class="field-even">vartype addr</dt>
<dd class="field-even"><p>Signal(addr_width)</p>
</dd>
<dt class="field-odd">ivar r_data</dt>
<dd class="field-odd"><p>Read data. Valid on the next cycle after <code class="docutils literal notranslate"><span class="pre">r_stb</span></code> is asserted. Otherwise, zero. (Keeping
read data of an unused interface at zero simplifies multiplexers.)</p>
</dd>
<dt class="field-even">vartype r_data</dt>
<dd class="field-even"><p>Signal(data_width)</p>
</dd>
<dt class="field-odd">ivar r_stb</dt>
<dd class="field-odd"><p>Read strobe. If <code class="docutils literal notranslate"><span class="pre">addr</span></code> points to the first chunk of a register, captures register value
and causes read side effects to be performed (if any). If <code class="docutils literal notranslate"><span class="pre">addr</span></code> points to any chunk
of a register, latches the captured value to <code class="docutils literal notranslate"><span class="pre">r_data</span></code>. Otherwise, latches zero
to <code class="docutils literal notranslate"><span class="pre">r_data</span></code>.</p>
</dd>
<dt class="field-even">vartype r_stb</dt>
<dd class="field-even"><p>Signal()</p>
</dd>
<dt class="field-odd">ivar w_data</dt>
<dd class="field-odd"><p>Write data. Must be valid when <code class="docutils literal notranslate"><span class="pre">w_stb</span></code> is asserted.</p>
</dd>
<dt class="field-even">vartype w_data</dt>
<dd class="field-even"><p>Signal(data_width)</p>
</dd>
<dt class="field-odd">ivar w_stb</dt>
<dd class="field-odd"><p>Write strobe. If <code class="docutils literal notranslate"><span class="pre">addr</span></code> points to the last chunk of a register, writes captured value
to the register and causes write side effects to be performed (if any). If <code class="docutils literal notranslate"><span class="pre">addr</span></code> points
to any chunk of a register, latches <code class="docutils literal notranslate"><span class="pre">w_data</span></code> to the captured value. Otherwise, does
nothing.</p>
</dd>
<dt class="field-even">vartype w_stb</dt>
<dd class="field-even"><p>Signal()</p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="torii.lib.soc.csr.bus.Decoder">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torii.lib.soc.csr.bus.</span></span><span class="sig-name descname"><span class="pre">Decoder</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#torii.lib.soc.csr.bus.Decoder" title="Permalink to this definition"></a></dt>
<dd><p>CSR bus decoder.</p>
<p>An address decoder for subordinate CSR buses.</p>
<section id="usage">
<h3>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h3>
<p>Although there is no functional difference between adding a set of registers directly to
a <a class="reference internal" href="#torii.lib.soc.csr.bus.Multiplexer" title="torii.lib.soc.csr.bus.Multiplexer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Multiplexer</span></code></a> and adding a set of registers to multiple <code class="xref py py-class docutils literal notranslate"><span class="pre">Multiplexer`s</span> <span class="pre">that</span> <span class="pre">are</span>
<span class="pre">aggregated</span> <span class="pre">with</span> <span class="pre">a</span> <span class="pre">:class:`Decoder</span></code>, hierarchical CSR buses are useful for organizing
a hierarchical design. If many peripherals are directly served by a single
<a class="reference internal" href="#torii.lib.soc.csr.bus.Multiplexer" title="torii.lib.soc.csr.bus.Multiplexer"><code class="xref py py-class docutils literal notranslate"><span class="pre">Multiplexer</span></code></a>, a very large amount of ports will connect the peripheral registers with
the decoder, and the cost of decoding logic would not be attributed to specific peripherals.
With a decoder, only five signals per peripheral will be used, and the logic could be kept
together with the peripheral.</p>
<dl class="field-list simple">
<dt class="field-odd">param addr_width</dt>
<dd class="field-odd"><p>Address width. See <a class="reference internal" href="#torii.lib.soc.csr.bus.Interface" title="torii.lib.soc.csr.bus.Interface"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interface</span></code></a>.</p>
</dd>
<dt class="field-even">type addr_width</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">param data_width</dt>
<dd class="field-odd"><p>Data width. See <a class="reference internal" href="#torii.lib.soc.csr.bus.Interface" title="torii.lib.soc.csr.bus.Interface"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interface</span></code></a>.</p>
</dd>
<dt class="field-even">type data_width</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">param alignment</dt>
<dd class="field-odd"><p>Window alignment. See <code class="xref py py-class docutils literal notranslate"><span class="pre">memory.MemoryMap</span></code>.</p>
</dd>
<dt class="field-even">type alignment</dt>
<dd class="field-even"><p>log2 of int</p>
</dd>
<dt class="field-odd">param name</dt>
<dd class="field-odd"><p>Window name. Optional.</p>
</dd>
<dt class="field-even">type name</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">ivar bus</dt>
<dd class="field-odd"><p>CSR bus providing access to subordinate buses.</p>
</dd>
<dt class="field-even">vartype bus</dt>
<dd class="field-even"><p><a class="reference internal" href="#torii.lib.soc.csr.bus.Interface" title="torii.lib.soc.csr.bus.Interface"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interface</span></code></a></p>
</dd>
</dl>
</section>
</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="torii.lib.soc.csr.bus.Multiplexer">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torii.lib.soc.csr.bus.</span></span><span class="sig-name descname"><span class="pre">Multiplexer</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#torii.lib.soc.csr.bus.Multiplexer" title="Permalink to this definition"></a></dt>
<dd><p>CSR register multiplexer.</p>
<p>An address-based multiplexer for CSR registers implementing atomic updates.</p>
<section id="latency">
<h3>Latency<a class="headerlink" href="#latency" title="Permalink to this heading"></a></h3>
<p>Writes are registered, and are performed 1 cycle after <code class="docutils literal notranslate"><span class="pre">w_stb</span></code> is asserted.</p>
</section>
<section id="alignment">
<h3>Alignment<a class="headerlink" href="#alignment" title="Permalink to this heading"></a></h3>
<p>Because the CSR bus conserves logic and routing resources, it is common to e.g. access
a CSR bus with an <em>n</em>-bit data path from a CPU with a <em>k</em>-bit datapath (<em>k&gt;n</em>) in cases
where CSR access latency is less important than resource usage. In this case, two strategies
are possible for connecting the CSR bus to the CPU:</p>
<blockquote>
<div><ul class="simple">
<li><p>The CPU could access the CSR bus directly (with no intervening logic other than simple
translation of control signals). In this case, the register alignment should be set
to 1 (i.e. <cite>alignment</cite> should be set to 0), and each <em>w</em>-bit register would occupy
<em>ceil(w/n)</em> addresses from the CPU perspective, requiring the same amount of memory
instructions to access.</p></li>
<li><p>The CPU could also access the CSR bus through a width down-converter, which would issue
<em>k/n</em> CSR accesses for each CPU access. In this case, the register alignment should be
set to <em>k/n</em>, and each <em>w</em>-bit register would occupy <em>ceil(w/k)</em> addresses from the CPU
perspective, requiring the same amount of memory instructions to access.</p></li>
</ul>
</div></blockquote>
<p>If the register alignment (i.e. <cite>2 ** alignment</cite>) is greater than 1, it affects which CSR bus
write is considered a write to the last register chunk. For example, if a 24-bit register is
used with a 8-bit CSR bus and a CPU with a 32-bit datapath, a write to this register requires
4 CSR bus writes to complete and the 4th write is the one that actually writes the value to
the register. This allows determining write latency solely from the amount of addresses the
register occupies in the CPU address space, and the width of the CSR bus.</p>
<dl class="field-list simple">
<dt class="field-odd">param addr_width</dt>
<dd class="field-odd"><p>Address width. See <a class="reference internal" href="#torii.lib.soc.csr.bus.Interface" title="torii.lib.soc.csr.bus.Interface"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interface</span></code></a>.</p>
</dd>
<dt class="field-even">type addr_width</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">param data_width</dt>
<dd class="field-odd"><p>Data width. See <a class="reference internal" href="#torii.lib.soc.csr.bus.Interface" title="torii.lib.soc.csr.bus.Interface"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interface</span></code></a>.</p>
</dd>
<dt class="field-even">type data_width</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">param alignment</dt>
<dd class="field-odd"><p>Register alignment. See <code class="xref py py-class docutils literal notranslate"><span class="pre">memory.MemoryMap</span></code>.</p>
</dd>
<dt class="field-even">type alignment</dt>
<dd class="field-even"><p>log2 of int</p>
</dd>
<dt class="field-odd">param name</dt>
<dd class="field-odd"><p>Window name. Optional.</p>
</dd>
<dt class="field-even">type name</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">ivar bus</dt>
<dd class="field-odd"><p>CSR bus providing access to registers.</p>
</dd>
<dt class="field-even">vartype bus</dt>
<dd class="field-even"><p><a class="reference internal" href="#torii.lib.soc.csr.bus.Interface" title="torii.lib.soc.csr.bus.Interface"><code class="xref py py-class docutils literal notranslate"><span class="pre">Interface</span></code></a></p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="events">
<h2>Events<a class="headerlink" href="#events" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="torii.lib.soc.csr.event.EventMonitor">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torii.lib.soc.csr.event.</span></span><span class="sig-name descname"><span class="pre">EventMonitor</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#torii.lib.soc.csr.event.EventMonitor" title="Permalink to this definition"></a></dt>
<dd><p>Event monitor.</p>
<p>A monitor for subordinate event sources, with a CSR bus interface.</p>
<section id="csr-registers">
<h3>CSR registers<a class="headerlink" href="#csr-registers" title="Permalink to this heading"></a></h3>
<dl>
<dt>enable<span class="classifier"><code class="docutils literal notranslate"><span class="pre">self.src.event_map.size</span></code>, read/write</span></dt><dd><p>Enabled events. See <code class="xref py py-meth docutils literal notranslate"><span class="pre">event.EventMap.sources()</span></code> for layout.</p>
</dd>
<dt>pending<span class="classifier"><code class="docutils literal notranslate"><span class="pre">self.src.event_map.size</span></code>, read/clear</span></dt><dd><p>Pending events. See <code class="xref py py-meth docutils literal notranslate"><span class="pre">event.EventMap.sources()</span></code> for layout.</p>
</dd>
</dl>
<dl class="field-list simple">
<dt class="field-odd">param data_width</dt>
<dd class="field-odd"><p>CSR bus data width. See <code class="xref py py-class docutils literal notranslate"><span class="pre">csr.Interface</span></code>.</p>
</dd>
<dt class="field-even">type data_width</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">param alignment</dt>
<dd class="field-odd"><p>CSR address alignment. See <code class="xref py py-class docutils literal notranslate"><span class="pre">memory.MemoryMap</span></code>.</p>
</dd>
<dt class="field-even">type alignment</dt>
<dd class="field-even"><p>int</p>
</dd>
<dt class="field-odd">param trigger</dt>
<dd class="field-odd"><p>Trigger mode. See <code class="xref py py-class docutils literal notranslate"><span class="pre">event.Source</span></code>.</p>
</dd>
<dt class="field-even">type trigger</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">event.Source.Trigger</span></code></p>
</dd>
</dl>
</section>
</dd></dl>

</section>
<section id="wishbone">
<h2>Wishbone<a class="headerlink" href="#wishbone" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="torii.lib.soc.csr.wishbone.WishboneCSRBridge">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">torii.lib.soc.csr.wishbone.</span></span><span class="sig-name descname"><span class="pre">WishboneCSRBridge</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">src_loc_at</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><a class="reference external" href="https://docs.python.org/3/library/functions.html#int" title="(in Python v3.11)"><span class="pre">int</span></a></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#torii.lib.soc.csr.wishbone.WishboneCSRBridge" title="Permalink to this definition"></a></dt>
<dd><p>Wishbone to CSR bridge.</p>
<p>A bus bridge for accessing CSR registers from Wishbone. This bridge supports any Wishbone
data width greater or equal to CSR data width and performs appropriate address translation.</p>
<section id="latency">
<h3>Latency<a class="headerlink" href="#latency" title="Permalink to this heading"></a></h3>
<p>Reads and writes always take <code class="docutils literal notranslate"><span class="pre">self.data_width</span> <span class="pre">//</span> <span class="pre">csr_bus.data_width</span> <span class="pre">+</span> <span class="pre">1</span></code> cycles to complete,
regardless of the select inputs. Write side effects occur simultaneously with acknowledgement.</p>
<dl class="field-list simple">
<dt class="field-odd">param csr_bus</dt>
<dd class="field-odd"><p>CSR bus driven by the bridge.</p>
</dd>
<dt class="field-even">type csr_bus</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">csr.Interface</span></code></p>
</dd>
<dt class="field-odd">param data_width</dt>
<dd class="field-odd"><p>Wishbone bus data width. If not specified, defaults to <code class="docutils literal notranslate"><span class="pre">csr_bus.data_width</span></code>.</p>
</dd>
<dt class="field-even">type data_width</dt>
<dd class="field-even"><p>int or None</p>
</dd>
<dt class="field-odd">param name</dt>
<dd class="field-odd"><p>Window name. Optional.</p>
</dd>
<dt class="field-even">type name</dt>
<dd class="field-even"><p>str</p>
</dd>
<dt class="field-odd">ivar wb_bus</dt>
<dd class="field-odd"><p>Wishbone bus provided by the bridge.</p>
</dd>
<dt class="field-even">vartype wb_bus</dt>
<dd class="field-even"><p><code class="xref py py-class docutils literal notranslate"><span class="pre">wishbone.Interface</span></code></p>
</dd>
</dl>
</section>
</dd></dl>

</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../periph.html" class="btn btn-neutral float-left" title="Peripherals" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../wishbone/index.html" class="btn btn-neutral float-right" title="Wishbone Bus" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Shrine Maiden Heavy Industries.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>