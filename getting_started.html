<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Getting Started &mdash; Torii-HDL 0.4.3.dev1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/styles.css" type="text/css" />
      <link rel="stylesheet" href="_static/platformpicker.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/styles.css" type="text/css" />
    <link rel="canonical" href="https://torii.shmdn.link/getting_started.html" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
        <script src="_static/platformpicker.js"></script>
        <script src="_static/wavedrom.skin.js"></script>
        <script src="_static/wavedrom.min.js"></script>
        <script src="_static/js/wavedrom.min.js"></script>
        <script src="_static/js/wavedrom.skin.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Tutorials" href="tutorials/index.html" />
    <link rel="prev" title="Installation" href="install.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html" class="icon icon-home"> Torii-HDL
          </a>
              <div class="version">
                latest
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#the-torii-language">The Torii language</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#the-torii-standard-library">The Torii standard library</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#the-torii-simulator">The Torii simulator</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#the-torii-build-system">The Torii build system</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#fpga-toolchain-integration">FPGA toolchain integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#development-board-definitions">Development board definitions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="install.html#system-requirements">System requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="install.html#installing-prerequisites">Installing Prerequisites</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install.html#installing-python">Installing Python</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#installing-yosys-and-gtkwave">Installing Yosys and GTKWave</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="install.html#installing-torii">Installing Torii</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install.html#latest-release">Latest release</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#development-snapshot">Development snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#editable-development-snapshot">Editable development snapshot</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="install.html#installing-board-definitions">Installing board definitions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="install.html#id1">Latest release</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#id2">Development snapshot</a></li>
<li class="toctree-l3"><a class="reference internal" href="install.html#id3">Editable development snapshot</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#a-counter">A counter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#implementing-a-counter">Implementing a counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#testing-a-counter">Testing a counter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#converting-a-counter">Converting a counter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#a-blinking-led">A blinking LED</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="tutorials/index.html">Tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="language/index.html">Language Guide</a><ul>
<li class="toctree-l2"><a class="reference internal" href="language/index.html#the-prelude">The prelude</a></li>
<li class="toctree-l2"><a class="reference internal" href="language/index.html#values">Values</a></li>
<li class="toctree-l2"><a class="reference internal" href="language/index.html#constants">Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="language/index.html#shapes">Shapes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#shapes-of-values">Shapes of values</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="language/index.html#shape-casting">Shape casting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#shapes-from-integers">Shapes from integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#shapes-from-ranges">Shapes from ranges</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#shapes-from-enumerations">Shapes from enumerations</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="language/index.html#value-casting">Value casting</a><ul>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#values-from-integers">Values from integers</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#values-from-enumeration-members">Values from enumeration members</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="language/index.html#signals">Signals</a><ul>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#signal-shapes">Signal shapes</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#signal-names">Signal names</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#initial-signal-values">Initial signal values</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#reset-less-signals">Reset-less signals</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="language/index.html#operators">Operators</a><ul>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#performing-or-describing-computations">Performing or describing computations?</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#width-extension">Width extension</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#arithmetic-operators">Arithmetic operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#comparison-operators">Comparison operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#bitwise-shift-and-rotate-operators">Bitwise, shift, and rotate operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#reduction-operators">Reduction operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#logical-operators">Logical operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#bit-sequence-operators">Bit sequence operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#conversion-operators">Conversion operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#choice-operator">Choice operator</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="language/index.html#modules">Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#control-domains">Control domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#assigning-to-signals">Assigning to signals</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#assignment-targets">Assignment targets</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#assignment-domains">Assignment domains</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#assignment-order">Assignment order</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#control-structures">Control structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#active-and-inactive-assignments">Active and inactive assignments</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#combinatorial-evaluation">Combinatorial evaluation</a></li>
<li class="toctree-l3"><a class="reference internal" href="language/index.html#synchronous-evaluation">Synchronous evaluation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api/index.html">API Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api/backend/index.html">Torii Backends</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/backend/cxxrtl.html">CXXRTL Backend</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/backend/cxxrtl.html#torii.back.cxxrtl.YosysError"><code class="docutils literal notranslate"><span class="pre">YosysError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/backend/rtlil.html">RTLIL Backend</a></li>
<li class="toctree-l3"><a class="reference internal" href="api/backend/verilog.html">Verilog Backend</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/backend/verilog.html#torii.back.verilog.YosysError"><code class="docutils literal notranslate"><span class="pre">YosysError</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="api/hdl/index.html">Torii HDL Reference</a><ul>
<li class="toctree-l3"><a class="reference internal" href="api/hdl/ast.html">Abstract Syntax Tree</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.Shape"><code class="docutils literal notranslate"><span class="pre">Shape</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.signed"><code class="docutils literal notranslate"><span class="pre">signed()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.unsigned"><code class="docutils literal notranslate"><span class="pre">unsigned()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.ShapeCastable"><code class="docutils literal notranslate"><span class="pre">ShapeCastable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.Const"><code class="docutils literal notranslate"><span class="pre">Const</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.AnyConst"><code class="docutils literal notranslate"><span class="pre">AnyConst</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.AnySeq"><code class="docutils literal notranslate"><span class="pre">AnySeq</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.Mux"><code class="docutils literal notranslate"><span class="pre">Mux()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.Cat"><code class="docutils literal notranslate"><span class="pre">Cat</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.Repl"><code class="docutils literal notranslate"><span class="pre">Repl</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.Array"><code class="docutils literal notranslate"><span class="pre">Array</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.Signal"><code class="docutils literal notranslate"><span class="pre">Signal</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.ClockSignal"><code class="docutils literal notranslate"><span class="pre">ClockSignal</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.ResetSignal"><code class="docutils literal notranslate"><span class="pre">ResetSignal</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.UserValue"><code class="docutils literal notranslate"><span class="pre">UserValue</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.ValueCastable"><code class="docutils literal notranslate"><span class="pre">ValueCastable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.Sample"><code class="docutils literal notranslate"><span class="pre">Sample</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.Initial"><code class="docutils literal notranslate"><span class="pre">Initial</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.ValueSet"><code class="docutils literal notranslate"><span class="pre">ValueSet</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ast.html#torii.hdl.ast.SignalSet"><code class="docutils literal notranslate"><span class="pre">SignalSet</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/hdl/cd.html">Clock Domain</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/cd.html#torii.hdl.cd.ClockDomain"><code class="docutils literal notranslate"><span class="pre">ClockDomain</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/cd.html#torii.hdl.cd.DomainError"><code class="docutils literal notranslate"><span class="pre">DomainError</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/hdl/dsl.html">DSL</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/dsl.html#torii.hdl.dsl.SyntaxError"><code class="docutils literal notranslate"><span class="pre">SyntaxError</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/dsl.html#torii.hdl.dsl.SyntaxWarning"><code class="docutils literal notranslate"><span class="pre">SyntaxWarning</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/hdl/ir.html">IR</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ir.html#torii.hdl.ir.UnusedElaboratable"><code class="docutils literal notranslate"><span class="pre">UnusedElaboratable</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/ir.html#torii.hdl.ir.DriverConflict"><code class="docutils literal notranslate"><span class="pre">DriverConflict</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/hdl/mem.html">Memory</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/mem.html#torii.hdl.mem.Memory"><code class="docutils literal notranslate"><span class="pre">Memory</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/mem.html#torii.hdl.mem.ReadPort"><code class="docutils literal notranslate"><span class="pre">ReadPort</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/mem.html#torii.hdl.mem.WritePort"><code class="docutils literal notranslate"><span class="pre">WritePort</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/mem.html#torii.hdl.mem.DummyPort"><code class="docutils literal notranslate"><span class="pre">DummyPort</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/hdl/rec.html">Records</a><ul>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/rec.html#torii.hdl.rec.Direction"><code class="docutils literal notranslate"><span class="pre">Direction</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="api/hdl/rec.html#torii.hdl.rec.Record"><code class="docutils literal notranslate"><span class="pre">Record</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="api/hdl/xfrm.html">XFRM</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="library/index.html">Standard Library</a><ul>
<li class="toctree-l2"><a class="reference internal" href="library/coding.html">Code Conversion</a><ul>
<li class="toctree-l3"><a class="reference internal" href="library/coding.html#one-hot-coding">One-hot coding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library/coding.html#torii.lib.coding.Encoder"><code class="docutils literal notranslate"><span class="pre">Encoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/coding.html#torii.lib.coding.Decoder"><code class="docutils literal notranslate"><span class="pre">Decoder</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="library/coding.html#priority-coding">Priority coding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library/coding.html#torii.lib.coding.PriorityEncoder"><code class="docutils literal notranslate"><span class="pre">PriorityEncoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/coding.html#torii.lib.coding.PriorityDecoder"><code class="docutils literal notranslate"><span class="pre">PriorityDecoder</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="library/coding.html#gray-coding">Gray coding</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library/coding.html#torii.lib.coding.GrayEncoder"><code class="docutils literal notranslate"><span class="pre">GrayEncoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/coding.html#torii.lib.coding.GrayDecoder"><code class="docutils literal notranslate"><span class="pre">GrayDecoder</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="library/cdc.html">Clock Domain Crossing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="library/cdc.html#torii.lib.cdc.FFSynchronizer"><code class="docutils literal notranslate"><span class="pre">FFSynchronizer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="library/cdc.html#torii.lib.cdc.AsyncFFSynchronizer"><code class="docutils literal notranslate"><span class="pre">AsyncFFSynchronizer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="library/cdc.html#torii.lib.cdc.ResetSynchronizer"><code class="docutils literal notranslate"><span class="pre">ResetSynchronizer</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="library/cdc.html#torii.lib.cdc.PulseSynchronizer"><code class="docutils literal notranslate"><span class="pre">PulseSynchronizer</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="library/fifo.html">First-in First-out Queues</a><ul>
<li class="toctree-l3"><a class="reference internal" href="library/fifo.html#torii.lib.fifo.FIFOInterface"><code class="docutils literal notranslate"><span class="pre">FIFOInterface</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="library/fifo.html#torii.lib.fifo.SyncFIFO"><code class="docutils literal notranslate"><span class="pre">SyncFIFO</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="library/fifo.html#torii.lib.fifo.SyncFIFOBuffered"><code class="docutils literal notranslate"><span class="pre">SyncFIFOBuffered</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="library/fifo.html#torii.lib.fifo.AsyncFIFO"><code class="docutils literal notranslate"><span class="pre">AsyncFIFO</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="library/fifo.html#torii.lib.fifo.AsyncFIFOBuffered"><code class="docutils literal notranslate"><span class="pre">AsyncFIFOBuffered</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="library/soc/index.html">System on Chip</a><ul>
<li class="toctree-l3"><a class="reference internal" href="library/soc/event.html">Events</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library/soc/event.html#torii.lib.soc.event.Source"><code class="docutils literal notranslate"><span class="pre">Source</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/event.html#torii.lib.soc.event.EventMap"><code class="docutils literal notranslate"><span class="pre">EventMap</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/event.html#torii.lib.soc.event.Monitor"><code class="docutils literal notranslate"><span class="pre">Monitor</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="library/soc/memory.html">Memory Map</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library/soc/memory.html#torii.lib.soc.memory.ResourceInfo"><code class="docutils literal notranslate"><span class="pre">ResourceInfo</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/memory.html#torii.lib.soc.memory.MemoryMap"><code class="docutils literal notranslate"><span class="pre">MemoryMap</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="library/soc/periph.html">Peripherals</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library/soc/periph.html#torii.lib.soc.periph.ConstantValue"><code class="docutils literal notranslate"><span class="pre">ConstantValue</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/periph.html#torii.lib.soc.periph.ConstantBool"><code class="docutils literal notranslate"><span class="pre">ConstantBool</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/periph.html#torii.lib.soc.periph.ConstantInt"><code class="docutils literal notranslate"><span class="pre">ConstantInt</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/periph.html#torii.lib.soc.periph.ConstantMap"><code class="docutils literal notranslate"><span class="pre">ConstantMap</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/periph.html#torii.lib.soc.periph.PeripheralInfo"><code class="docutils literal notranslate"><span class="pre">PeripheralInfo</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="library/soc/csr/index.html">CSRs</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library/soc/csr/index.html#bus">Bus</a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/csr/index.html#events">Events</a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/csr/index.html#wishbone">Wishbone</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="library/soc/wishbone/index.html">Wishbone Bus</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library/soc/wishbone/index.html#torii.lib.soc.wishbone.bus.CycleType"><code class="docutils literal notranslate"><span class="pre">CycleType</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/wishbone/index.html#torii.lib.soc.wishbone.bus.BurstTypeExt"><code class="docutils literal notranslate"><span class="pre">BurstTypeExt</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/wishbone/index.html#torii.lib.soc.wishbone.bus.Interface"><code class="docutils literal notranslate"><span class="pre">Interface</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/wishbone/index.html#torii.lib.soc.wishbone.bus.Decoder"><code class="docutils literal notranslate"><span class="pre">Decoder</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/soc/wishbone/index.html#torii.lib.soc.wishbone.bus.Arbiter"><code class="docutils literal notranslate"><span class="pre">Arbiter</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="library/stdio/index.html">Industry Standard I/O</a><ul>
<li class="toctree-l3"><a class="reference internal" href="library/stdio/index.html#serial-i-o">Serial I/O</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library/stdio/index.html#torii.lib.stdio.serial.AsyncSerialRX"><code class="docutils literal notranslate"><span class="pre">AsyncSerialRX</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/stdio/index.html#torii.lib.stdio.serial.AsyncSerialTX"><code class="docutils literal notranslate"><span class="pre">AsyncSerialTX</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="library/stdio/index.html#torii.lib.stdio.serial.AsyncSerial"><code class="docutils literal notranslate"><span class="pre">AsyncSerial</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="library/vendor/index.html">FPGA Vendor Modules</a><ul>
<li class="toctree-l3"><a class="reference internal" href="library/vendor/lattice/index.html">Lattice FPGA Modules</a><ul>
<li class="toctree-l4"><a class="reference internal" href="library/vendor/lattice/index.html#ice40-blocks">iCE40 Blocks</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="library/vendor/xilinx/index.html">Xilinx FPGA Modules</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="platforms/index.html">Platform Integration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="platforms/fpga/index.html">Torii FPGA Platforms</a><ul>
<li class="toctree-l3"><a class="reference internal" href="platforms/fpga/intel.html">Intel</a><ul>
<li class="toctree-l4"><a class="reference internal" href="platforms/fpga/intel.html#torii.platform.vendor.intel.IntelPlatform"><code class="docutils literal notranslate"><span class="pre">IntelPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="platforms/fpga/lattice-ecp5.html">Lattice ECP5</a><ul>
<li class="toctree-l4"><a class="reference internal" href="platforms/fpga/lattice-ecp5.html#torii.platform.vendor.lattice_ecp5.LatticeECP5Platform"><code class="docutils literal notranslate"><span class="pre">LatticeECP5Platform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="platforms/fpga/lattice-ice40.html">Lattice iCE40</a><ul>
<li class="toctree-l4"><a class="reference internal" href="platforms/fpga/lattice-ice40.html#torii.platform.vendor.lattice_ice40.LatticeICE40Platform"><code class="docutils literal notranslate"><span class="pre">LatticeICE40Platform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="platforms/fpga/lattice-machxo-2-3l.html">Lattice MachXO2 and MachXO3L</a><ul>
<li class="toctree-l4"><a class="reference internal" href="platforms/fpga/lattice-machxo-2-3l.html#torii.platform.vendor.lattice_machxo_2_3l.LatticeMachXO2Platform"><code class="docutils literal notranslate"><span class="pre">LatticeMachXO2Platform</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="platforms/fpga/lattice-machxo-2-3l.html#torii.platform.vendor.lattice_machxo_2_3l.LatticeMachXO3LPlatform"><code class="docutils literal notranslate"><span class="pre">LatticeMachXO3LPlatform</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="platforms/fpga/lattice-machxo-2-3l.html#torii.platform.vendor.lattice_machxo_2_3l.LatticeMachXO2Or3LPlatform"><code class="docutils literal notranslate"><span class="pre">LatticeMachXO2Or3LPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="platforms/fpga/quicklogic.html">Quicklogic</a><ul>
<li class="toctree-l4"><a class="reference internal" href="platforms/fpga/quicklogic.html#torii.platform.vendor.quicklogic.QuicklogicPlatform"><code class="docutils literal notranslate"><span class="pre">QuicklogicPlatform</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="platforms/fpga/xilinx.html">Xilinx</a><ul>
<li class="toctree-l4"><a class="reference internal" href="platforms/fpga/xilinx.html#torii.platform.vendor.xilinx.XilinxPlatform"><code class="docutils literal notranslate"><span class="pre">XilinxPlatform</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="sim/index.html">Simulation Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a><ul>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#unreleased">Unreleased</a><ul>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#added">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#changed">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#deprecated">Deprecated</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#removed">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#fixed">Fixed</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#security">Security</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id1">0.4.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id2">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id3">0.4.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id4">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id5">0.4.0</a><ul>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id6">Added</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id7">Changed</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id8">Removed</a></li>
<li class="toctree-l3"><a class="reference internal" href="changelog.html#id9">Fixed</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="changelog.html#id10">0.1.0 - 0.3.0</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Projects Using Torii</a></li>
<li class="toctree-l1"><a class="reference external" href="https://shrine-maiden-heavy-industries.github.io/torii-boards/">Torii Boards</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/shrine-maiden-heavy-industries/torii-hdl/">Source Code</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Torii-HDL</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Getting Started</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/shrine-maiden-heavy-industries/torii-hdl/blob/main/docs/getting_started.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="getting-started">
<h1>Getting Started<a class="headerlink" href="#getting-started" title="Permalink to this heading"></a></h1>
<p>This section demonstrates the basic Torii workflow to provide a cursory overview of the language and the toolchain. See the <a class="reference internal" href="tutorials/index.html"><span class="doc std std-doc">Tutorials</span></a> section for a step-by-step introduction to the language, and the <a class="reference internal" href="language/index.html"><span class="doc std std-doc">Language Guide</span></a> for a detailed explanation of every language construct.</p>
<div class="admonition-todo admonition" id="id1">
<p class="admonition-title">Todo</p>
<p>add link to build system doc</p>
</div>
<div class="admonition-todo admonition" id="id2">
<p class="admonition-title">Todo</p>
<p>add link to more complex examples?</p>
</div>
<section id="a-counter">
<h2>A counter<a class="headerlink" href="#a-counter" title="Permalink to this heading"></a></h2>
<p>As a first example, consider a counter with a fixed limit, enable, and overflow. The code for this example is shown below. <a class="reference download internal" download="" href="_downloads/9916e1f0618daa91d3860f1bdac16820/up_counter.py"><span class="xref download myst">Download</span></a> and run it:</p>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>   $ python3 up_counter.py
</pre></div>
</div>
<section id="implementing-a-counter">
<h3>Implementing a counter<a class="headerlink" href="#implementing-a-counter" title="Permalink to this heading"></a></h3>
<p>A 16-bit up counter with enable input, overflow output, and a limit fixed at design time can be implemented in Torii as follows:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">torii</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">class</span> <span class="nc">UpCounter</span><span class="p">(</span><span class="n">Elaboratable</span><span class="p">):</span>
<span class="linenos"> 5</span>    <span class="sd">&#39;&#39;&#39;</span>
<span class="linenos"> 6</span><span class="sd">    A 16-bit up counter with a fixed limit.</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="sd">    Parameters</span>
<span class="linenos"> 9</span><span class="sd">    ----------</span>
<span class="linenos">10</span><span class="sd">    limit : int</span>
<span class="linenos">11</span><span class="sd">        The value at which the counter overflows.</span>
<span class="linenos">12</span>
<span class="linenos">13</span><span class="sd">    Attributes</span>
<span class="linenos">14</span><span class="sd">    ----------</span>
<span class="linenos">15</span><span class="sd">    en : Signal, in</span>
<span class="linenos">16</span><span class="sd">        The counter is incremented if ``en`` is asserted, and retains</span>
<span class="linenos">17</span><span class="sd">        its value otherwise.</span>
<span class="linenos">18</span><span class="sd">    ovf : Signal, out</span>
<span class="linenos">19</span><span class="sd">        ``ovf`` is asserted when the counter reaches its limit.</span>
<span class="linenos">20</span><span class="sd">    &#39;&#39;&#39;</span>
<span class="linenos">21</span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
<span class="linenos">22</span>        <span class="bp">self</span><span class="o">.</span><span class="n">limit</span> <span class="o">=</span> <span class="n">limit</span>
<span class="linenos">23</span>
<span class="linenos">24</span>        <span class="c1"># Ports</span>
<span class="linenos">25</span>        <span class="bp">self</span><span class="o">.</span><span class="n">en</span>  <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>
<span class="linenos">26</span>        <span class="bp">self</span><span class="o">.</span><span class="n">ovf</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">()</span>
<span class="linenos">27</span>
<span class="linenos">28</span>        <span class="c1"># State</span>
<span class="linenos">29</span>        <span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="linenos">30</span>
<span class="linenos">31</span>    <span class="k">def</span> <span class="nf">elaborate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">platform</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Module</span><span class="p">:</span>
<span class="linenos">32</span>        <span class="n">m</span> <span class="o">=</span> <span class="n">Module</span><span class="p">()</span>
<span class="linenos">33</span>
<span class="linenos">34</span>        <span class="n">m</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">comb</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ovf</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">==</span> <span class="bp">self</span><span class="o">.</span><span class="n">limit</span><span class="p">)</span>
<span class="linenos">35</span>
<span class="linenos">36</span>        <span class="k">with</span> <span class="n">m</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">en</span><span class="p">):</span>
<span class="linenos">37</span>            <span class="k">with</span> <span class="n">m</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ovf</span><span class="p">):</span>
<span class="linenos">38</span>                <span class="n">m</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">sync</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">39</span>            <span class="k">with</span> <span class="n">m</span><span class="o">.</span><span class="n">Else</span><span class="p">():</span>
<span class="linenos">40</span>                <span class="n">m</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">sync</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">count</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">count</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">41</span>
<span class="linenos">42</span>        <span class="k">return</span> <span class="n">m</span>
</pre></div>
</div>
<p>The reusable building block of Torii designs is an <code class="docutils literal notranslate"><span class="pre">Elaboratable</span></code>: a Python class that includes HDL signals (<code class="docutils literal notranslate"><span class="pre">en</span></code> and <code class="docutils literal notranslate"><span class="pre">ovf</span></code>, in this case) as a part of its interface, and provides the <code class="docutils literal notranslate"><span class="pre">elaborate</span></code> method that defines its behavior.</p>
<!-- TODO: link to Elaboratable reference -->
<p>Most <code class="docutils literal notranslate"><span class="pre">elaborate</span></code> implementations use a <code class="docutils literal notranslate"><span class="pre">Module</span></code> helper to describe combinatorial (<code class="docutils literal notranslate"><span class="pre">m.d.comb</span></code>) and synchronous (<code class="docutils literal notranslate"><span class="pre">m.d.sync</span></code>) logic controlled with conditional syntax (<code class="docutils literal notranslate"><span class="pre">m.If</span></code>, <code class="docutils literal notranslate"><span class="pre">m.Elif</span></code>, <code class="docutils literal notranslate"><span class="pre">m.Else</span></code>) similar to Python’s. They can also instantiate vendor-defined black boxes or modules written in other HDLs.</p>
<!-- TODO: link to DSL reference -->
</section>
<section id="testing-a-counter">
<h3>Testing a counter<a class="headerlink" href="#testing-a-counter" title="Permalink to this heading"></a></h3>
<p>To verify its functionality, the counter can be simulated for a small amount of time, with a test bench driving it and checking a few simple conditions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">44</span><span class="kn">from</span> <span class="nn">torii.sim</span> <span class="kn">import</span> <span class="n">Simulator</span>
<span class="linenos">45</span>
<span class="linenos">46</span>
<span class="linenos">47</span><span class="n">dut</span> <span class="o">=</span> <span class="n">UpCounter</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="linenos">48</span><span class="k">def</span> <span class="nf">bench</span><span class="p">():</span>
<span class="linenos">49</span>    <span class="c1"># Disabled counter should not overflow.</span>
<span class="linenos">50</span>    <span class="k">yield</span> <span class="n">dut</span><span class="o">.</span><span class="n">en</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">51</span>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">30</span><span class="p">):</span>
<span class="linenos">52</span>        <span class="k">yield</span>
<span class="linenos">53</span>        <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="k">yield</span> <span class="n">dut</span><span class="o">.</span><span class="n">ovf</span><span class="p">)</span>
<span class="linenos">54</span>
<span class="linenos">55</span>    <span class="c1"># Once enabled, the counter should overflow in 25 cycles.</span>
<span class="linenos">56</span>    <span class="k">yield</span> <span class="n">dut</span><span class="o">.</span><span class="n">en</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="linenos">57</span>    <span class="k">for</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">25</span><span class="p">):</span>
<span class="linenos">58</span>        <span class="k">yield</span>
<span class="linenos">59</span>        <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="k">yield</span> <span class="n">dut</span><span class="o">.</span><span class="n">ovf</span><span class="p">)</span>
<span class="linenos">60</span>    <span class="k">yield</span>
<span class="linenos">61</span>    <span class="k">assert</span> <span class="p">(</span><span class="k">yield</span> <span class="n">dut</span><span class="o">.</span><span class="n">ovf</span><span class="p">)</span>
<span class="linenos">62</span>
<span class="linenos">63</span>    <span class="c1"># The overflow should clear in one cycle.</span>
<span class="linenos">64</span>    <span class="k">yield</span>
<span class="linenos">65</span>    <span class="k">assert</span> <span class="ow">not</span> <span class="p">(</span><span class="k">yield</span> <span class="n">dut</span><span class="o">.</span><span class="n">ovf</span><span class="p">)</span>
<span class="linenos">66</span>
<span class="linenos">67</span>
<span class="linenos">68</span><span class="n">sim</span> <span class="o">=</span> <span class="n">Simulator</span><span class="p">(</span><span class="n">dut</span><span class="p">)</span>
<span class="linenos">69</span><span class="n">sim</span><span class="o">.</span><span class="n">add_clock</span><span class="p">(</span><span class="mf">1e-6</span><span class="p">)</span> <span class="c1"># 1 MHz</span>
<span class="linenos">70</span><span class="n">sim</span><span class="o">.</span><span class="n">add_sync_process</span><span class="p">(</span><span class="n">bench</span><span class="p">)</span>
<span class="linenos">71</span><span class="k">with</span> <span class="n">sim</span><span class="o">.</span><span class="n">write_vcd</span><span class="p">(</span><span class="s2">&quot;up_counter.vcd&quot;</span><span class="p">):</span>
<span class="linenos">72</span>    <span class="n">sim</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>The test bench is implemented as a Python generator function that is co-simulated with the counter itself. The test bench can inspect the simulated signals with <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">sig</span></code>, update them with <code class="docutils literal notranslate"><span class="pre">yield</span> <span class="pre">sig.eq(val)</span></code>, and advance the simulation by one clock cycle with <code class="docutils literal notranslate"><span class="pre">yield</span></code>.</p>
<!-- TODO: link to simulator reference -->
<p>When run, the test bench finishes successfully, since all of the assertions hold, and produces a VCD file with waveforms recorded for every <code class="docutils literal notranslate"><span class="pre">Signal</span></code> as well as the clock of the <code class="docutils literal notranslate"><span class="pre">sync</span></code> domain:</p>
<p><img alt="A screenshot of GTKWave displaying waveforms near the clock cycle where the counter overflows." src="_images/up_counter_gtkwave.png" /></p>
</section>
<section id="converting-a-counter">
<h3>Converting a counter<a class="headerlink" href="#converting-a-counter" title="Permalink to this heading"></a></h3>
<p>Although some Torii workflows do not include Verilog at all, it is still the de facto standard for HDL interoperability. Any Torii design can be converted to synthesizable Verilog using the corresponding backend:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">74</span><span class="kn">from</span> <span class="nn">torii.back</span> <span class="kn">import</span> <span class="n">verilog</span>
<span class="linenos">75</span>
<span class="linenos">76</span>
<span class="linenos">77</span><span class="n">top</span> <span class="o">=</span> <span class="n">UpCounter</span><span class="p">(</span><span class="mi">25</span><span class="p">)</span>
<span class="linenos">78</span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;up_counter.v&quot;</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="linenos">79</span>    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">verilog</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="n">ports</span><span class="o">=</span><span class="p">[</span><span class="n">top</span><span class="o">.</span><span class="n">en</span><span class="p">,</span> <span class="n">top</span><span class="o">.</span><span class="n">ovf</span><span class="p">]))</span>
</pre></div>
</div>
<p>The signals that will be connected to the ports of the top-level Verilog module should be specified explicitly. The rising edge clock and synchronous reset signals of the <code class="docutils literal notranslate"><span class="pre">sync</span></code> domain are added automatically; if necessary, the control signals can be configured explicitly. The result is the following Verilog code (lightly edited for clarity):</p>
<!-- TODO: link to clock domain section of language reference -->
<div class="highlight-verilog notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">generator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Torii&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 2</span><span class="k">module</span><span class="w"> </span><span class="n">top</span><span class="p">(</span><span class="n">clk</span><span class="p">,</span><span class="w"> </span><span class="n">rst</span><span class="p">,</span><span class="w"> </span><span class="n">en</span><span class="p">,</span><span class="w"> </span><span class="n">ovf</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">  </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&lt;torii-root&gt;/torii/hdl/ir.py:526&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">  </span><span class="k">input</span><span class="w"> </span><span class="n">clk</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">  </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&lt;torii-root&gt;/torii/hdl/ir.py:526&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">  </span><span class="k">input</span><span class="w"> </span><span class="n">rst</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">  </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;up_counter.py:26&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">  </span><span class="k">input</span><span class="w"> </span><span class="n">en</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">  </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;up_counter.py:27&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos">10</span><span class="w">  </span><span class="k">output</span><span class="w"> </span><span class="n">ovf</span><span class="p">;</span><span class="w"></span>
<span class="linenos">11</span><span class="w">  </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;up_counter.py:30&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos">12</span><span class="w">  </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mh">16&#39;h0000</span><span class="p">;</span><span class="w"></span>
<span class="linenos">13</span><span class="w">  </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;up_counter.py:30&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos">14</span><span class="w">  </span><span class="kt">reg</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">\count$next</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="linenos">15</span><span class="w">  </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;up_counter.py:35&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos">16</span><span class="w">  </span><span class="kt">wire</span><span class="w"> </span><span class="n">\$1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="linenos">17</span><span class="w">  </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;up_counter.py:41&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos">18</span><span class="w">  </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">16</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">\$3</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="linenos">19</span><span class="w">  </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;up_counter.py:41&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos">20</span><span class="w">  </span><span class="kt">wire</span><span class="w"> </span><span class="p">[</span><span class="mh">16</span><span class="o">:</span><span class="mh">0</span><span class="p">]</span><span class="w"> </span><span class="n">\$4</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="linenos">21</span><span class="w">  </span><span class="k">assign</span><span class="w"> </span><span class="n">\$1</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;up_counter.py:35&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="mh">5&#39;h19</span><span class="p">;</span><span class="w"></span>
<span class="linenos">22</span><span class="w">  </span><span class="k">assign</span><span class="w"> </span><span class="n">\$4</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;up_counter.py:41&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"> </span><span class="mh">1&#39;h1</span><span class="p">;</span><span class="w"></span>
<span class="linenos">23</span><span class="w">  </span><span class="k">always</span><span class="w"> </span><span class="p">@(</span><span class="k">posedge</span><span class="w"> </span><span class="n">clk</span><span class="p">)</span><span class="w"></span>
<span class="linenos">24</span><span class="w">      </span><span class="n">count</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="n">\count$next</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="linenos">25</span><span class="w">  </span><span class="k">always</span><span class="w"> </span><span class="p">@</span><span class="o">*</span><span class="w"> </span><span class="k">begin</span><span class="w"></span>
<span class="linenos">26</span><span class="w">    </span><span class="n">\count$next</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">count</span><span class="p">;</span><span class="w"></span>
<span class="linenos">27</span><span class="w">    </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;up_counter.py:37&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos">28</span><span class="w">    </span><span class="k">casez</span><span class="w"> </span><span class="p">(</span><span class="n">en</span><span class="p">)</span><span class="w"></span>
<span class="linenos">29</span><span class="w">      </span><span class="cm">/* src = &quot;up_counter.py:37&quot; */</span><span class="w"></span>
<span class="linenos">30</span><span class="w">      </span><span class="mh">1&#39;h1</span><span class="o">:</span><span class="w"></span>
<span class="linenos">31</span><span class="w">          </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;up_counter.py:38&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos">32</span><span class="w">          </span><span class="k">casez</span><span class="w"> </span><span class="p">(</span><span class="n">ovf</span><span class="p">)</span><span class="w"></span>
<span class="linenos">33</span><span class="w">            </span><span class="cm">/* src = &quot;up_counter.py:38&quot; */</span><span class="w"></span>
<span class="linenos">34</span><span class="w">            </span><span class="mh">1&#39;h1</span><span class="o">:</span><span class="w"></span>
<span class="linenos">35</span><span class="w">                </span><span class="n">\count$next</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">16&#39;h0000</span><span class="p">;</span><span class="w"></span>
<span class="linenos">36</span><span class="w">            </span><span class="cm">/* src = &quot;up_counter.py:40&quot; */</span><span class="w"></span>
<span class="linenos">37</span><span class="w">            </span><span class="k">default</span><span class="o">:</span><span class="w"></span>
<span class="linenos">38</span><span class="w">                </span><span class="n">\count$next</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">\$3</span><span class="w"> </span><span class="p">[</span><span class="mh">15</span><span class="o">:</span><span class="mh">0</span><span class="p">];</span><span class="w"></span>
<span class="linenos">39</span><span class="w">          </span><span class="k">endcase</span><span class="w"></span>
<span class="linenos">40</span><span class="w">    </span><span class="k">endcase</span><span class="w"></span>
<span class="linenos">41</span><span class="w">    </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">src</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;&lt;torii-root&gt;/torii/hdl/xfrm.py:518&quot;</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="w"></span>
<span class="linenos">42</span><span class="w">    </span><span class="k">casez</span><span class="w"> </span><span class="p">(</span><span class="n">rst</span><span class="p">)</span><span class="w"></span>
<span class="linenos">43</span><span class="w">      </span><span class="mh">1&#39;h1</span><span class="o">:</span><span class="w"></span>
<span class="linenos">44</span><span class="w">          </span><span class="n">\count$next</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="mh">16&#39;h0000</span><span class="p">;</span><span class="w"></span>
<span class="linenos">45</span><span class="w">    </span><span class="k">endcase</span><span class="w"></span>
<span class="linenos">46</span><span class="w">  </span><span class="k">end</span><span class="w"></span>
<span class="linenos">47</span><span class="w">  </span><span class="k">assign</span><span class="w"> </span><span class="n">\$3</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">\$4</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="linenos">48</span><span class="w">  </span><span class="k">assign</span><span class="w"> </span><span class="n">ovf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">\$1</span><span class="w"> </span><span class="p">;</span><span class="w"></span>
<span class="linenos">49</span><span class="k">endmodule</span><span class="w"></span>
</pre></div>
</div>
<p>To aid debugging, the generated Verilog code has the same general structure as the Torii source code (although more verbose), and contains extensive source location information.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unfortunately, at the moment none of the supported toolchains will use the source location information in diagnostic messages.</p>
</div>
</section>
</section>
<section id="a-blinking-led">
<h2>A blinking LED<a class="headerlink" href="#a-blinking-led" title="Permalink to this heading"></a></h2>
<p>Although Torii works well as a standalone HDL, it also includes a build system that integrates with FPGA toolchains, and many board definition files for common developer boards that include pinouts and programming adapter invocations. The following code will blink a LED with a frequency of 1 Hz on any board that has a LED and an oscillator:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="kn">from</span> <span class="nn">torii</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos"> 2</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="k">class</span> <span class="nc">LEDBlinker</span><span class="p">(</span><span class="n">Elaboratable</span><span class="p">):</span>
<span class="linenos"> 5</span>    <span class="k">def</span> <span class="nf">elaborate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">platform</span><span class="p">):</span>
<span class="linenos"> 6</span>        <span class="n">m</span> <span class="o">=</span> <span class="n">Module</span><span class="p">()</span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span>        <span class="n">led</span> <span class="o">=</span> <span class="n">platform</span><span class="o">.</span><span class="n">request</span><span class="p">(</span><span class="s2">&quot;led&quot;</span><span class="p">)</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span>        <span class="n">half_freq</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">platform</span><span class="o">.</span><span class="n">default_clk_frequency</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)</span>
<span class="linenos">11</span>        <span class="n">timer</span> <span class="o">=</span> <span class="n">Signal</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="n">half_freq</span> <span class="o">+</span> <span class="mi">1</span><span class="p">))</span>
<span class="linenos">12</span>
<span class="linenos">13</span>        <span class="k">with</span> <span class="n">m</span><span class="o">.</span><span class="n">If</span><span class="p">(</span><span class="n">timer</span> <span class="o">==</span> <span class="n">half_freq</span><span class="p">):</span>
<span class="linenos">14</span>            <span class="n">m</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">sync</span> <span class="o">+=</span> <span class="n">led</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="o">~</span><span class="n">led</span><span class="p">)</span>
<span class="linenos">15</span>            <span class="n">m</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">sync</span> <span class="o">+=</span> <span class="n">timer</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="linenos">16</span>        <span class="k">with</span> <span class="n">m</span><span class="o">.</span><span class="n">Else</span><span class="p">():</span>
<span class="linenos">17</span>            <span class="n">m</span><span class="o">.</span><span class="n">d</span><span class="o">.</span><span class="n">sync</span> <span class="o">+=</span> <span class="n">timer</span><span class="o">.</span><span class="n">eq</span><span class="p">(</span><span class="n">timer</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="linenos">18</span>
<span class="linenos">19</span>        <span class="k">return</span> <span class="n">m</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">LEDBlinker</span></code> module will use the first LED available on the board, and derive the clock divisor from the oscillator frequency specified in the clock constraint. It can be used, for example, with the <a class="reference external" href="https://www.latticesemi.com/icestick">Lattice iCEStick evaluation board</a>, one of the many boards already supported by Torii:</p>
<div class="admonition-todo admonition" id="id3">
<p class="admonition-title">Todo</p>
<p>link to list of supported boards</p>
</div>
<div class="admonition-todo admonition" id="id4">
<p class="admonition-title">Todo</p>
<p>Link to the installation instructions for the FOSS iCE40 toolchain, probably as a part of board documentation.</p>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="linenos">21</span><span class="kn">from</span> <span class="nn">torii_boards.icestick</span> <span class="kn">import</span> <span class="o">*</span>
<span class="linenos">22</span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="n">ICEStickPlatform</span><span class="p">()</span><span class="o">.</span><span class="n">build</span><span class="p">(</span><span class="n">LEDBlinker</span><span class="p">(),</span> <span class="n">do_program</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>With only a single line of code, the design is synthesized, placed, routed, and programmed to the on-board Flash memory. Although not all applications will use the Torii build system, the designs that choose it can benefit from the “turnkey” built-in workflows; if necessary, the built-in workflows can be customized to include user-specified options, commands, and files.</p>
<div class="admonition-todo admonition" id="id5">
<p class="admonition-title">Todo</p>
<p>link to build system reference</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The ability to check with minimal effort whether the entire toolchain functions correctly is so important that it is built into every board definition file. To use it with the iCEStick board, run:</p>
</div>
<div class="highlight-sh notranslate"><div class="highlight"><pre><span></span>   $ python3 -m torii_boards.lattice.icestick
</pre></div>
</div>
<p>This command will build and program a test bitstream similar to the example above.</p>
</section>
</section>

    <script type="text/javascript">
        function init() {
            WaveDrom.ProcessAll();
        }
        window.onload = init;
    </script>

           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install.html" class="btn btn-neutral float-left" title="Installation" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="tutorials/index.html" class="btn btn-neutral float-right" title="Tutorials" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Shrine Maiden Heavy Industries.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>